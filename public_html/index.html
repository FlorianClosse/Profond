<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>

    <head>
        <title>Profond</title>

        <link href="css/style.css" type="text/css" rel="stylesheet" media="screen" />

        <!--        <script type="text/javascript" src="philogl/PhiloGL.js"></script>
                <script type="text/javascript" src="js/profond.js"></script>-->
        <script src="three/three.js"></script>
        <script src="js/jquery-1.9.1.js"></script>
        <script src="three/TrackballControls.js"></script>

    </head>



    <body>
        <!--        <canvas id="canvas" style="border: none;" width="1496" height="1024"></canvas>-->

        <script>
            scene = new THREE.Scene();


            var debugaxis = function(axisLength) {
                //Shorten the vertex function
                function v(x, y, z) {
                    return new THREE.Vertex(new THREE.Vector3(x, y, z));
                }

                //Create axis (point1, point2, colour)
                function createAxis(p1, p2, color) {
                    var line, lineGeometry = new THREE.Geometry(),
                            lineMat = new THREE.LineBasicMaterial({color: color, lineWidth: 6});
                    lineGeometry.vertices.push(p1, p2);
                    line = new THREE.Line(lineGeometry, lineMat);
                    scene.add(line);
                }

                createAxis(v(-20, 0, 0), v(20, 0, 0), 0xFF0000);
                createAxis(v(0, -20, 0), v(0,20, 0), 0x00FF00);
                createAxis(v(0, 0, -20), v(0, 0, 20), 0x0000FF);
            };

    //To use enter the axis length
            debugaxis(100);



            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000);
            camera.position.set(0, 0, 50);


            var renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);

            document.body.appendChild(renderer.domElement);
            var geometry = new THREE.Geometry()

            $.getJSON('Teapot.json', function(data) {
                var items = [];
                console.debug(data);
                var vertices = {};
                var indices = {};
                vertices = data['vertices'];
                indices = data['indices'];
                var i = 0;
                console.debug(vertices);
                while (i < vertices.length) {
                    //Add Vertice att Geometry
                    geometry.vertices.push(new THREE.Vector3(vertices[i], vertices[i + 1], vertices[i + 2]));
                    i += 3;
                }
                var i = 0;
                console.debug(vertices);
                while (i < indices.length) {
                    //Add Vertice att Geometry
                    geometry.faces.push(new THREE.Face3(indices[i], indices[i + 1], indices[i + 2]));
                    i += 3;
                }


                mesh = new THREE.Mesh(geometry);
                scene.add(mesh, camera);
                cameraControls = new THREE.TrackballControls(camera);
                render();

            });

            function render() {

                requestAnimationFrame(render);

                cameraControls.update();

                renderer.render(scene, camera);

            }
        </script>
    </body>

</html>
